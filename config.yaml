version: v1
server:
  listen: ":8080"
  read_timeout_ms: 5000
  write_timeout_ms: 5000

cookie:
  name: "Clearance"
  same_site: "Lax"
  max_age_sec: 3600
  secure: false
  http_only: true

proxy:
  enabled: true
  mode: "integrated"
  origin: "http://localhost:3000"
  
  # Challenge setup
  challenge_path: "/__uam"
  
  # WebAuthn configuration (using localhost/test settings)
  webauthn:
    enabled: true
    rp_id: "localhost"
    rp_name: "MeSH System Access"
    # IMPORTANT: Must include port in origin for WebAuthn to work on localhost
    rp_origins: 
      - "http://localhost:8080"
    ttl_sec: 60

# Use a dummy secret for testing
token:
  alg: "HS256"
  keys:
    v1: "dGhpc2lzYXRlc3RrZXlkb25vdHVzZWlucHJvZHVjdGlvbg" # base64("thisisatestkeydonotuseinproduction")
  current_kid: "v1"
  issuer: "fastgate"

policy:
  # Force challenge on almost everything for testing
  challenge_threshold: 0  
  block_threshold: 100

# Dummy cluster secret for stateless issuer
cluster:
  enabled: true
  secret_key: "dGhpc2lzYXRlc3RrZXlkb25vdHVzZWlucHJvZHVjdGlvbg" # base64("thisisatestkeydonotuseinproduction")

logging:
  level: "debug"